@model RestaurantRatingAnlyticsResponse

@{
    ViewData["Title"] = "Rating Analytics";
    
    decimal averageRating = 0;
    
    if (Model.RatingsCount > 0)
    {
        averageRating = Model.ScoreRate / Model.RatingsCount;
    }
}

<div class="adm-section-header">
    <h1 class="adm-title">
        <i class="bi bi-star"></i> Rating Analytics
    </h1>
    <p class="adm-subtitle">Overview of your restaurant's performance based on customer feedback.</p>
</div>

<div class="adm-dashboard-grid">
    <!-- Summary Card: Average Rating -->
    <div class="adm-card stats-card">
        <div class="stats-icon primary">
            <i class="bi bi-star-fill"></i>
        </div>
        <div class="stats-info">
            <h3 class="stats-value">@averageRating.ToString("0.0")</h3>
            <span class="stats-label">Average Rating</span>
        </div>
        <div class="stats-trend">
            <div class="rating-stars-display">
                @for (int i = 1; i <= 5; i++)
                {
                    if (averageRating >= i)
                    {
                        <i class="bi bi-star-fill text-warning"></i>
                    }
                    else if (averageRating >= i - 0.5m)
                    {
                        <i class="bi bi-star-half text-warning"></i>
                    }
                    else
                    {
                        <i class="bi bi-star text-muted-light"></i>
                    }
                }
            </div>
        </div>
    </div>

    <!-- Summary Card: Total Reviews -->
    <div class="adm-card stats-card">
        <div class="stats-icon success">
            <i class="bi bi-people-fill"></i>
        </div>
        <div class="stats-info">
            <h3 class="stats-value">@Model.RatingsCount</h3>
            <span class="stats-label">Total Reviews</span>
        </div>
    </div>
    
    <!-- Summary Card: Total Score Points -->
    <div class="adm-card stats-card">
        <div class="stats-icon info">
            <i class="bi bi-trophy-fill"></i>
        </div>
        <div class="stats-info">
            <h3 class="stats-value">@Model.ScoreRate.ToString("0.#")</h3>
            <span class="stats-label">Total Score Points</span>
        </div>
    </div>
</div>

<style>
    .rating-stars-display {
        color: #ffc107; /* Bootstrap warning color */
        font-size: 1.25rem;
    }
    .text-muted-light {
        color: #e9ecef;
    }
    .adm-dark-mode .text-muted-light {
        color: #4b5563;
    }
    
    .stats-card {
        display: flex;
        align-items: center;
        padding: 1.5rem;
        gap: 1.5rem;
    }
    
    .stats-icon {
        width: 60px;
        height: 60px;
        border-radius: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.75rem;
        flex-shrink: 0;
    }
    
    .stats-icon.primary {
        background: rgba(79, 70, 229, 0.1);
        color: #4F46E5;
    }
    
    .stats-icon.success {
        background: rgba(16, 185, 129, 0.1);
        color: #10B981;
    }
    
    .stats-icon.info {
        background: rgba(6, 182, 212, 0.1);
        color: #06B6D4;
    }
    
    .stats-info {
        flex: 1;
    }
    
    .stats-value {
        font-size: 1.8rem;
        font-weight: 700;
        margin: 0;
        color: var(--adm-text-primary);
        line-height: 1.2;
    }
    
    .stats-label {
        color: var(--adm-text-secondary);
        font-size: 0.9rem;
        font-weight: 500;
    }
    
    .adm-dashboard-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 1.5rem;
        margin-top: 2rem;
    }
</style>
