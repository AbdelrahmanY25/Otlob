@model NationalIdResponse

@{
    ViewData["Title"] = "National ID Document";
}

<link rel="stylesheet" href="~/css/documents.css" asp-append-version="true" />

<div class="doc-page">
    <!-- Hero Section -->
    <div class="doc-hero">
        <div class="doc-hero-content">
            <div class="doc-hero-top">
                <a class="doc-back-btn" 
                   asp-area="SuperAdmin"
                   asp-controller="Restaurants" 
                   asp-action="ResturantDetails" 
                   asp-route-id="@Model.RestaurantId">
                    <i class="fas fa-arrow-left"></i>
                    Back to Restaurant
                </a>
                <span class="doc-status-badge status-@Model.Status.ToString().ToLower()">
                    @if (Model.Status == DocumentStatus.Accepted)
                    {
                        <i class="fas fa-check-circle"></i>
                    }
                    else if (Model.Status == DocumentStatus.Rejected)
                    {
                        <i class="fas fa-times-circle"></i>
                    }
                    else
                    {
                        <i class="fas fa-clock"></i>
                    }
                    @Model.Status
                </span>
            </div>
            <div class="doc-hero-main">
                <div class="doc-icon-wrapper">
                    <i class="fas fa-id-card"></i>
                </div>
                <div class="doc-hero-info">
                    <h1 class="doc-title">National ID & Signature</h1>
                    <p class="doc-subtitle">Identity verification documents for restaurant owner authentication</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="doc-main">
        <!-- Quick Stats -->
        <div class="doc-quick-stats">
            <div class="doc-stat-card">
                <div class="doc-stat-icon primary">
                    <i class="fas fa-user"></i>
                </div>
                <div class="doc-stat-content">
                    <div class="doc-stat-value">@Model.FullName.Split(' ').FirstOrDefault()</div>
                    <div class="doc-stat-label">First Name</div>
                </div>
            </div>
            <div class="doc-stat-card">
                <div class="doc-stat-icon @(Model.NationalIdExpiryDate > DateOnly.FromDateTime(DateTime.Now) ? "success" : "danger")">
                    <i class="fas fa-calendar-check"></i>
                </div>
                <div class="doc-stat-content">
                    <div class="doc-stat-value">@(Model.NationalIdExpiryDate.ToDateTime(TimeOnly.MinValue).Subtract(DateTime.Now).Days) days</div>
                    <div class="doc-stat-label">@(Model.NationalIdExpiryDate > DateOnly.FromDateTime(DateTime.Now) ? "Until Expiry" : "Expired")</div>
                </div>
            </div>
            <div class="doc-stat-card">
                <div class="doc-stat-icon warning">
                    <i class="fas fa-file-alt"></i>
                </div>
                <div class="doc-stat-content">
                    <div class="doc-stat-value">2</div>
                    <div class="doc-stat-label">Documents</div>
                </div>
            </div>
        </div>

        <div class="doc-content-grid">
            <!-- Left Column - Info Cards -->
            <div class="doc-info-column">
                <!-- Personal Information Card -->
                <div class="doc-card">
                    <div class="doc-card-header">
                        <h2 class="doc-card-title">
                            <i class="fas fa-user-circle"></i>
                            Personal Information
                        </h2>
                    </div>
                    <div class="doc-card-body">
                        <div class="doc-info-grid">
                            <div class="doc-info-item full-width">
                                <div class="doc-info-icon">
                                    <i class="fas fa-user"></i>
                                </div>
                                <div class="doc-info-content">
                                    <span class="doc-info-label">Full Name</span>
                                    <div class="doc-info-value">@Model.FullName</div>
                                </div>
                            </div>
                            <div class="doc-info-item">
                                <div class="doc-info-icon">
                                    <i class="fas fa-hashtag"></i>
                                </div>
                                <div class="doc-info-content">
                                    <span class="doc-info-label">National ID Number</span>
                                    <div class="doc-info-value">@Model.NationalIdNumber</div>
                                </div>
                            </div>
                            <div class="doc-info-item">
                                <div class="doc-info-icon">
                                    <i class="fas fa-calendar-times"></i>
                                </div>
                                <div class="doc-info-content">
                                    <span class="doc-info-label">Expiry Date</span>
                                    <div class="doc-info-value">@Model.NationalIdExpiryDate.ToString("MMMM dd, yyyy")</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Document Status Card -->
                <div class="doc-card">
                    <div class="doc-card-header">
                        <h2 class="doc-card-title">
                            <i class="fas fa-clipboard-check"></i>
                            Verification Status
                        </h2>
                    </div>
                    <div class="doc-card-body">
                        <div class="doc-info-grid">
                            <div class="doc-info-item">
                                <div class="doc-info-icon">
                                    <i class="fas fa-flag"></i>
                                </div>
                                <div class="doc-info-content">
                                    <span class="doc-info-label">Current Status</span>
                                    <div class="doc-info-value">@Model.Status</div>
                                </div>
                            </div>
                            <div class="doc-info-item">
                                <div class="doc-info-icon">
                                    <i class="fas fa-shield-alt"></i>
                                </div>
                                <div class="doc-info-content">
                                    <span class="doc-info-label">Document Validity</span>
                                    <div class="doc-info-value">@(Model.NationalIdExpiryDate > DateOnly.FromDateTime(DateTime.Now) ? "Valid" : "Expired")</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column - Sidebar -->
            <div class="doc-sidebar">
                <!-- National ID Card File -->
                <div class="doc-file-card">
                    <h3>
                        <i class="fas fa-id-card"></i>
                        National ID Card
                    </h3>
                    <div class="doc-file-icon">
                        <i class="fas fa-file-pdf"></i>
                    </div>
                    <div class="doc-file-name">@Model.NationalIdCard.FileName</div>
                    <div class="doc-file-actions">
                        <a asp-area="SuperAdmin"
                           asp-controller="Documents" 
                           asp-action="Download" 
                           asp-route-id="@Model.NationalIdCard.Id"
                           class="doc-btn doc-btn-download">
                            <i class="fas fa-download"></i>
                            Download
                        </a>
                    </div>
                </div>

                <!-- Signature Image File -->
                <div class="doc-file-card">
                    <h3>
                        <i class="fas fa-signature"></i>
                        Signature Image
                    </h3>
                    <div class="doc-file-icon">
                        <i class="fas fa-image"></i>
                    </div>
                    <div class="doc-file-name">@Model.SignatureImage.FileName</div>
                    <div class="doc-file-actions">
                        <a asp-area="SuperAdmin"
                           asp-controller="Documents" 
                           asp-action="Download" 
                           asp-route-id="@Model.SignatureImage.Id"
                           class="doc-btn doc-btn-download">
                            <i class="fas fa-download"></i>
                            Download
                        </a>
                    </div>
                </div>

                <!-- Status Actions Card -->
                <div class="doc-action-card">
                    <div class="doc-action-header">
                        <h3 class="doc-action-title">
                            <i class="fas fa-sliders-h"></i>
                            Change Status
                        </h3>
                    </div>
                    <div class="doc-action-body">
                        @foreach (var status in Enum.GetValues<DocumentStatus>())
                        {
                            @if (status != Model.Status)
                            {
                                <a asp-area="SuperAdmin"
                                   asp-controller="NationalIds"
                                   asp-action="ChangeNationalIdDocumentStatus" 
                                   asp-route-id="@Model.Id"
                                   asp-route-status="@status"
                                   asp-route-restaurantId="@Model.RestaurantId"
                                   class="doc-btn-status @(status == DocumentStatus.Accepted ? "doc-btn-accept" : status == DocumentStatus.Rejected ? "doc-btn-reject" : "doc-btn-pending")">
                                    @if (status == DocumentStatus.Accepted)
                                    {
                                        <i class="fas fa-check"></i>
                                    }
                                    else if (status == DocumentStatus.Rejected)
                                    {
                                        <i class="fas fa-times"></i>
                                    }
                                    else
                                    {
                                        <i class="fas fa-clock"></i>
                                    }
                                    @status.ToString()
                                </a>
                            }
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_NotificationPartial"></partial>
}
