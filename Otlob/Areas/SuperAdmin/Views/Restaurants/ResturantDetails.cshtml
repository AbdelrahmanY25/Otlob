@model RestaurantDetailsResponse

@{
    ViewData["Title"] = "Restaurant Details";
}

<link rel="stylesheet" href="~/css/restaurantDetailsPage.css" asp-append-version="true"/>

<div class="rd-page">
    <div class="rd-hero">
        <div class="rd-hero-content">
            <div class="rd-hero-top">
                <a class="rd-back-btn" 
                   asp-action="@(Model.AcctiveStatus == AcctiveStatus.UnAccepted || Model.AcctiveStatus == AcctiveStatus.Pending ? "UnAcceptedRestaurants" : "ActiveResturatns")"
                   asp-controller="Restaurants">
                    <i class="fas fa-arrow-left"></i>
                    Back to List
                </a>
                <div class="rd-hero-badges">
                    <span class="rd-status-badge status-@Model.AcctiveStatus.ToString().ToLower()">
                        <i class="fas fa-circle"></i>
                        @Model.AcctiveStatus
                    </span>
                    <span class="rd-status-badge status-@Model.ProgressStatus.ToString().ToLower()">
                        <i class="fas fa-tasks"></i>
                        @Model.ProgressStatus
                    </span>
                </div>
            </div>
            <div class="rd-hero-main">
                <div class="rd-avatar-wrapper">
                    <img class="rd-avatar" 
                         alt="@Model.Name Logo" 
                         src="/images/@(Model.Image ?? "Default.jpg")" 
                         onerror="this.src='/images/Default.jpg'" />
                    @if (Model.AcctiveStatus == AcctiveStatus.Acctive)
                    {
                        <div class="rd-avatar-badge">
                            <i class="fas fa-check"></i>
                        </div>
                    }
                </div>
                <div class="rd-hero-info">
                    <h1 class="rd-restaurant-name">@Model.Name</h1>
                    <div class="rd-hero-meta">
                        <span class="rd-meta-item">
                            <i class="fas fa-envelope"></i>
                            @Model.Email
                        </span>
                        <span class="rd-meta-item">
                            <i class="fas fa-phone"></i>
                            @Model.Phone
                        </span>
                        <span class="rd-meta-item">
                            <i class="fas fa-building"></i>
                            @Model.BusinessType
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="rd-main">
        <!-- Quick Stats -->
        <div class="rd-quick-stats">
            <div class="rd-stat-card">
                <div class="rd-stat-icon delivery">
                    <i class="fas fa-dollar-sign"></i>
                </div>
                <div class="rd-stat-value">@Model.DeliveryFee.ToString("C")</div>
                <div class="rd-stat-label">Delivery Fee</div>
            </div>
            <div class="rd-stat-card">
                <div class="rd-stat-icon time">
                    <i class="fas fa-clock"></i>
                </div>
                <div class="rd-stat-value">@Model.DeliveryDuration min</div>
                <div class="rd-stat-label">Delivery Time</div>
            </div>
            @if (Model.AcctiveStatus != AcctiveStatus.UnAccepted || Model.AcctiveStatus == AcctiveStatus.Rejected)
            {
                <a asp-area="SuperAdmin" asp-controller="Branches" asp-action="Branches" asp-route-id="@Model.Key" class="rd-stat-card rd-stat-card-link" role="button" title="View branches">
                    <div class="rd-stat-icon branches">
                        <i class="fas fa-map-marker-alt"></i>
                    </div>
                    <div class="rd-stat-value">@Model.NumberOfBranches</div>
                    <div class="rd-stat-label">Branches</div>
                </a>
            }
            <div class="rd-stat-card">
                <div class="rd-stat-icon hours">
                    <i class="fas fa-store"></i>
                </div>
                <div class="rd-stat-value">@Model.OpeningTime.ToString("hh:mm")</div>
                <div class="rd-stat-label">Opens At</div>
            </div>
        </div>

        <div class="rd-content-grid">
            <!-- Left Column - Info Cards -->
            <div class="rd-info-column">
                <!-- Restaurant Information -->
                <div class="rd-card">
                    <div class="rd-card-header">
                        <h2 class="rd-card-title">
                            <i class="fas fa-info-circle"></i>
                            Restaurant Information
                        </h2>
                    </div>
                    <div class="rd-card-body">
                        <div class="rd-info-grid">
                            <div class="rd-info-item">
                                <div class="rd-info-icon">
                                    <i class="fas fa-phone"></i>
                                </div>
                                <div class="rd-info-content">
                                    <div class="rd-info-label">Phone Number</div>
                                    <div class="rd-info-value">@Model.Phone</div>
                                </div>
                            </div>
                            <div class="rd-info-item">
                                <div class="rd-info-icon">
                                    <i class="fas fa-envelope"></i>
                                </div>
                                <div class="rd-info-content">
                                    <div class="rd-info-label">Email Address</div>
                                    <div class="rd-info-value">@Model.Email</div>
                                </div>
                            </div>
                            <div class="rd-info-item full-width">
                                <div class="rd-info-icon">
                                    <i class="fas fa-align-left"></i>
                                </div>
                                <div class="rd-info-content">
                                    <div class="rd-info-label">Description</div>
                                    <div class="rd-info-value description">@(string.IsNullOrEmpty(Model.Description) ? "No description provided" : Model.Description)</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Business Details -->
                <div class="rd-card">
                    <div class="rd-card-header">
                        <h2 class="rd-card-title">
                            <i class="fas fa-briefcase"></i>
                            Business Details
                        </h2>
                    </div>
                    <div class="rd-card-body">
                        <div class="rd-info-grid">
                            <div class="rd-info-item">
                                <div class="rd-info-icon">
                                    <i class="fas fa-building"></i>
                                </div>
                                <div class="rd-info-content">
                                    <div class="rd-info-label">Business Type</div>
                                    <div class="rd-info-value">@Model.BusinessType</div>
                                </div>
                            </div>
                            <div class="rd-info-item">
                                <div class="rd-info-icon">
                                    <i class="fas fa-user-tie"></i>
                                </div>
                                <div class="rd-info-content">
                                    <div class="rd-info-label">Administrator Role</div>
                                    <div class="rd-info-value">@Model.AdministratorRole</div>
                                </div>
                            </div>
                            <div class="rd-info-item">
                                <div class="rd-info-icon">
                                    <i class="fas fa-door-open"></i>
                                </div>
                                <div class="rd-info-content">
                                    <div class="rd-info-label">Opening Time</div>
                                    <div class="rd-info-value">@Model.OpeningTime.ToString("hh:mm tt")</div>
                                </div>
                            </div>
                            <div class="rd-info-item">
                                <div class="rd-info-icon">
                                    <i class="fas fa-door-closed"></i>
                                </div>
                                <div class="rd-info-content">
                                    <div class="rd-info-label">Closing Time</div>
                                    <div class="rd-info-value">@Model.ClosingTime.ToString("hh:mm tt")</div>
                                </div>
                            </div>
                            <div class="rd-info-item full-width">
                                <div class="rd-info-icon">
                                    <i class="fas fa-tags"></i>
                                </div>
                                <div class="rd-info-content">
                                    <div class="rd-info-label">Categories</div>
                                    <div class="rd-categories">
                                        @if (Model.Categories != null && Model.Categories.Any())
                                        {
                                            @foreach (var category in Model.Categories)
                                            {
                                                <span class="rd-category-tag">
                                                    <i class="fas fa-utensils"></i>
                                                    @category.Name
                                                </span>
                                            }
                                        }
                                        else
                                        {
                                            <span class="rd-no-data">No categories assigned</span>
                                        }
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column - Actions Sidebar -->
            <div class="rd-sidebar">
                <!-- Status Actions -->
                <div class="rd-action-card">
                    <div class="rd-action-header">
                        <h3 class="rd-action-title">
                            <i class="fas fa-sliders-h"></i>
                            Status Management
                        </h3>
                    </div>
                    <div class="rd-action-body">
                        @if (Model.AcctiveStatus == AcctiveStatus.UnAccepted)
                        {
                            <a class="rd-btn rd-btn-warning" asp-controller="RestaurantStatus" asp-action="ChangeRestaurantStatus" asp-route-id="@Model.Key" asp-route-status="@AcctiveStatus.Pending">
                                <i class="fas fa-clock"></i> Change to Pending
                            </a>
                            <a class="rd-btn rd-btn-danger" asp-controller="RestaurantStatus" asp-action="ChangeRestaurantStatus" asp-route-id="@Model.Key" asp-route-status="@AcctiveStatus.Rejected">
                                <i class="fas fa-times"></i> Reject Restaurant
                            </a>
                        }
                        @if (Model.AcctiveStatus == AcctiveStatus.Pending)
                        {
                            <a class="rd-btn rd-btn-success" asp-controller="RestaurantStatus" asp-action="ChangeRestaurantStatus" asp-route-id="@Model.Key" asp-route-status="@AcctiveStatus.Acctive">
                                <i class="fas fa-check"></i> Activate Restaurant
                            </a>
                            <a class="rd-btn rd-btn-secondary" asp-controller="RestaurantStatus" asp-action="ChangeRestaurantStatus" asp-route-id="@Model.Key" asp-route-status="@AcctiveStatus.UnAccepted">
                                <i class="fas fa-undo"></i> Change to UnAccepted
                            </a>
                            <a class="rd-btn rd-btn-danger" asp-controller="RestaurantStatus" asp-action="ChangeRestaurantStatus" asp-route-id="@Model.Key" asp-route-status="@AcctiveStatus.Rejected">
                                <i class="fas fa-times"></i> Reject Restaurant
                            </a>
                        }
                        @if (Model.AcctiveStatus == AcctiveStatus.Acctive)
                        {
                            <a class="rd-btn rd-btn-warning" asp-controller="RestaurantStatus" asp-action="ChangeRestaurantStatus" asp-route-id="@Model.Key" asp-route-status="@AcctiveStatus.Pending">
                                <i class="fas fa-clock"></i> Change to Pending
                            </a>
                            <a class="rd-btn rd-btn-secondary" asp-controller="RestaurantStatus" asp-action="ChangeRestaurantStatus" asp-route-id="@Model.Key" asp-route-status="@AcctiveStatus.UnAccepted">
                                <i class="fas fa-undo"></i> Change to UnAccepted
                            </a>
                            <a class="rd-btn rd-btn-orange" asp-controller="RestaurantStatus" asp-action="ChangeRestaurantStatus" asp-route-id="@Model.Key" asp-route-status="@AcctiveStatus.Warning">
                                <i class="fas fa-exclamation-triangle"></i> Issue Warning
                            </a>
                            <a class="rd-btn rd-btn-danger" asp-controller="RestaurantStatus" asp-action="ChangeRestaurantStatus" asp-route-id="@Model.Key" asp-route-status="@AcctiveStatus.Block">
                                <i class="fas fa-ban"></i> Block Restaurant
                            </a>
                        }
                        @if (Model.AcctiveStatus == AcctiveStatus.Warning)
                        {
                            <a class="rd-btn rd-btn-success" asp-controller="RestaurantStatus" asp-action="ChangeRestaurantStatus" asp-route-id="@Model.Key" asp-route-status="@AcctiveStatus.Acctive">
                                <i class="fas fa-check"></i> Restore to Active
                            </a>
                            <a class="rd-btn rd-btn-danger" asp-controller="RestaurantStatus" asp-action="ChangeRestaurantStatus" asp-route-id="@Model.Key" asp-route-status="@AcctiveStatus.Block">
                                <i class="fas fa-ban"></i> Block Restaurant
                            </a>
                        }
                        @if (Model.AcctiveStatus == AcctiveStatus.Block)
                        {
                            <a class="rd-btn rd-btn-orange" asp-controller="RestaurantStatus" asp-action="ChangeRestaurantStatus" asp-route-id="@Model.Key" asp-route-status="@AcctiveStatus.Warning">
                                <i class="fas fa-exclamation-triangle"></i> Change to Warning
                            </a>
                            <a class="rd-btn rd-btn-success" asp-controller="RestaurantStatus" asp-action="ChangeRestaurantStatus" asp-route-id="@Model.Key" asp-route-status="@AcctiveStatus.Acctive">
                                <i class="fas fa-check"></i> Restore to Active
                            </a>
                        }
                    </div>
                </div>

                <!-- Profile Management -->
                <div class="rd-action-card">
                    <div class="rd-action-header">
                        <h3 class="rd-action-title">
                            <i class="fas fa-user-edit"></i>
                            Profile Management
                        </h3>
                    </div>
                    <div class="rd-action-body">
                        <a class="rd-btn rd-btn-primary" asp-controller="RestaurantProfile" asp-action="EditRestaurantProfile" asp-route-id="@Model.Key">
                            <i class="fas fa-store"></i> Edit Restaurant Profile
                        </a>
                        <a class="rd-btn rd-btn-primary" asp-controller="RestaurantBusinessDetails" asp-action="BusinessDetails" asp-route-key="@Model.Key">
                            <i class="fas fa-store"></i> Edit Restaurant Business Details
                        </a>
                        <a class="rd-btn rd-btn-secondary" asp-controller="UserProfile" asp-action="UserProfile" asp-route-id="@Model.OwnerId">
                            <i class="fas fa-user"></i> Edit Admin Profile
                        </a>
                    </div>
                </div>

                <!-- Documents -->
                <div class="rd-action-card">
                    <div class="rd-action-header">
                        <h3 class="rd-action-title">
                            <i class="fas fa-folder-open"></i>
                            Documents
                        </h3>
                    </div>
                    <div class="rd-action-body">
                        <a class="rd-btn rd-btn-primary" asp-area="SuperAdmin" asp-controller="CommercialRegistrations" asp-action="CommertialRegistration" asp-route-id="@Model.Key">
                            <i class="fas fa-file-contract"></i> Commercial Registration
                        </a>
                        <a class="rd-btn rd-btn-primary" asp-area="SuperAdmin" asp-controller="TradeMarks" asp-action="TradeMark" asp-route-id="@Model.Key">
                            <i class="fas fa-trademark"></i> Trade Mark
                        </a>
                        <a class="rd-btn rd-btn-primary" asp-area="SuperAdmin" asp-controller="Vats" asp-action="Vat" asp-route-id="@Model.Key">
                            <i class="fas fa-receipt"></i> VAT Certificate
                        </a>
                        <a class="rd-btn rd-btn-primary" asp-area="SuperAdmin" asp-controller="BankAccounts" asp-action="BankAccount" asp-route-id="@Model.Key">
                            <i class="fas fa-university"></i> Bank Account
                        </a>
                        <a class="rd-btn rd-btn-primary" asp-area="SuperAdmin" asp-controller="NationalIds" asp-action="NationalId" asp-route-id="@Model.Key">
                            <i class="fas fa-id-card"></i> National ID
                        </a>
                    </div>
                </div>

                @if (Model.AcctiveStatus != AcctiveStatus.UnAccepted || Model.AcctiveStatus == AcctiveStatus.Rejected)
                {
                    <!-- Menu Categories Management -->
                    <div class="rd-action-card">
                        <div class="rd-action-header">
                            <h3 class="rd-action-title">
                                <i class="fas fa-utensils"></i>
                                Menu Categories Management
                            </h3>
                        </div>
                        <div class="rd-action-body">
                            <a class="rd-btn rd-btn-primary" asp-controller="Menu" asp-action="Menu" asp-route-key="@Model.Key">
                                <i class="fas fa-list-alt"></i> Categories
                            </a>                            
                        </div>
                    </div>
                    
                    <!-- Meals Management -->
                    <div class="rd-action-card">
                        <div class="rd-action-header">
                            <h3 class="rd-action-title">
                                <i class="fas fa-utensils"></i>
                                Meals Management
                            </h3>
                        </div>
                        <div class="rd-action-body">
                            <a class="rd-btn rd-btn-primary" asp-controller="RestaurantMeals" asp-action="RestaurantMeals" asp-route-id="@Model.Key">
                                <i class="fas fa-list-alt"></i> View Meals
                            </a>
                            <a class="rd-btn rd-btn-secondary" asp-controller="RestaurantMeals" asp-action="RestaurantDeletedMeals" asp-route-id="@Model.Key">
                                <i class="fas fa-trash-restore"></i> Deleted Meals
                            </a>
                        </div>
                    </div>
 
                    @if (Model.AcctiveStatus != AcctiveStatus.Pending)
                    {
                        <!-- Orders Management -->
                        <div class="rd-action-card">
                        <div class="rd-action-header">
                            <h3 class="rd-action-title">
                                <i class="fas fa-shopping-bag"></i>
                                Orders Management
                            </h3>
                        </div>
                        <div class="rd-action-body">
                            <a class="rd-btn rd-btn-primary" asp-controller="RestaurantOrders" asp-action="CurrentRestaurantOrders" asp-route-id="@Model.Key">
                                <i class="fas fa-clock"></i> Current Orders
                            </a>
                            <a class="rd-btn rd-btn-secondary" asp-controller="RestaurantOrders" asp-action="CompletedRestaurantOrders" asp-route-id="@Model.Key">
                                <i class="fas fa-check-double"></i> Completed Orders
                            </a>
                        </div>
                    </div>                        
                    }
                }

                <!-- Danger Zone -->
                <div class="rd-action-card rd-danger-zone">
                    <div class="rd-action-header">
                        <h3 class="rd-action-title">
                            <i class="fas fa-skull-crossbones"></i>
                            Danger Zone
                        </h3>
                    </div>
                    <div class="rd-action-body">
                        <button type="button" class="rd-btn rd-btn-delete" data-bs-toggle="modal" data-bs-target="#deleteModal">
                            <i class="fas fa-trash-alt"></i> Delete Restaurant
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Delete Confirmation Modal -->
<div class="modal fade rd-modal" id="deleteModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="rd-modal-header">
                <div class="rd-modal-icon">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <h5 class="modal-title">Delete Restaurant</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="rd-modal-body">
                <p class="confirm-text">Are you sure you want to delete this restaurant?</p>
                <div class="restaurant-name">@Model.Name</div>
                <div class="rd-warning-list">
                    <ul>
                        <li><i class="fas fa-times-circle"></i> All restaurant data will be permanently deleted</li>
                        <li><i class="fas fa-times-circle"></i> All associated meals will be removed</li>
                        <li><i class="fas fa-times-circle"></i> All orders history will be lost</li>
                        <li><i class="fas fa-times-circle"></i> All documents will be deleted</li>
                    </ul>
                </div>
                <div class="rd-warning-note">
                    <i class="fas fa-info-circle"></i>
                    This action cannot be undone.
                </div>
            </div>
            <div class="rd-modal-footer">
                <button type="button" class="rd-modal-btn rd-modal-btn-cancel" data-bs-dismiss="modal">
                    <i class="fas fa-times"></i> Cancel
                </button>
                <a asp-area="SuperAdmin" asp-controller="Restaurants" asp-action="DeleteRestaurant" asp-route-id="@Model.Key" class="rd-modal-btn rd-modal-btn-delete">
                    <i class="fas fa-trash-alt"></i> Yes, Delete
                </a>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_NotificationPartial"></partial>
}