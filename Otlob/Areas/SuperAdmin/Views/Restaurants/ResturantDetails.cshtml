@model RestaurantVM

@inject IEncryptionService encryptionService

@section Notify {
    <partial name="_NotificationPartial"></partial>
}

@{
    string encryptionId = encryptionService.EncryptId(Model.RestaurantVMId);
}


<div>
    <a class="btn btn-primary mb-2" asp-action=@(Model.AcctiveStatus == AcctiveStatus.Unaccepted ? "ResturatnRequist" : "ActiveResturatns") asp-controller="Home">←</a>   
</div>


@if (Model.Image is not null)
{
    <img class="avatar rounded-circle" alt="restaurantLogo" src="data:image/*;base64,@(Convert.ToBase64String(Model.Image))" />
}
else
{
    <img class="avatar rounded-circle" src="~/images/Default.jpg" alt="resturantLogo">
}

<span>@Model.Name</span>
<div>
    <hr />
    <dl class="row">        
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.Address)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.Address)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.Phone)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.Phone)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.Email)
        </dt>
        <dd class = "col-sm-10">
            @Model.Email
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.Description)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.Description)
        </dd>                
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.DeliveryFee)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.DeliveryFee)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.DeliveryDuration)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.DeliveryDuration)
        </dd>
        @if (Model.AcctiveStatus == AcctiveStatus.Unaccepted) 
        {
            <dt class = "col-sm-2">
                @Html.DisplayNameFor(model => model.AcctiveStatus)
            </dt>

            <dd class = "col-sm-10">
                <a class="btn btn-success" asp-controller="RestaurantStatus" asp-action="ChangeRestaurantStatus" asp-route-id="@encryptionId" asp-route-status="@AcctiveStatus.Acctive">Accept Resturant</a>
            </dd>
        }
    </dl>
</div>

<div>
    <a class="btn btn-primary" asp-controller="RestaurantProfile" asp-action="EditRestaurantProfile" asp-route-id="@encryptionId">Resturant Profile</a>
    <a class="btn btn-primary" asp-controller="UserProfile" asp-action="UserProfile" asp-route-UserId="@Model.UserId">Resturant Admin Profile</a>
    <a class="btn btn-warning" asp-controller="RestaurantMeals" asp-action="RestaurantMeals" asp-route-id="@encryptionId">Meals</a>
    <a class="btn btn-secondary" asp-controller="RestaurantMeals" asp-action="RestaurantDeletedMeals" asp-route-id="@encryptionId">Deleted Meals</a>
    <a class="btn btn-success" asp-controller="RestaurantOrders" asp-action="CurrentRestaurantOrders" asp-route-id="@encryptionId">Current Restaurant Orders</a>
    <a class="btn btn-secondary" asp-controller="RestaurantOrders" asp-action="CompletedRestaurantOrders" asp-route-id="@encryptionId">Completed Restaurant Orders</a>
    <a class="btn btn-danger mt-2" asp-action="ResturantComplaints" asp-route-id="@encryptionId">Complaints</a>
</div>