@model IQueryable<PendingRestaurantResponse>

@{
    ViewData["Title"] = "Pending Restaurant Approvals";
    var restaurantsList = Model.ToList();
    var totalCount = restaurantsList.Count;
}

<link rel="stylesheet" href="~/css/unAcceptedRestaurants.css" asp-append-version="true" />

<div class="unaccepted-restaurants-page">
    <div class="page-header">
        <h1>
            <i class="fas fa-store-alt"></i> Pending Restaurant Approvals
        </h1>
        <p>Review and approve new restaurant applications</p>
    </div>

    <div class="restaurants-container">
        <div class="filter-section">
            <div class="search-bar">
                <i class="fas fa-search search-icon"></i>
                <input 
                    type="text" 
                    id="restaurantSearch" 
                    placeholder="Search restaurants by name... (Ctrl + K)" 
                    aria-label="Search restaurants"
                />
            </div>
        </div>

        @if (totalCount > 0)
        {
            <div class="restaurants-count">
                <span>Pending Restaurants:</span>
                <span class="count-badge">@totalCount</span>
            </div>
        }

        @if (totalCount > 0)
        {
            <div class="restaurants-grid">
                @foreach (var restaurant in restaurantsList)
                {
                    <div class="restaurant-card" data-restaurant-id="@restaurant.Key">
                        <div class="restaurant-image-wrapper">
                            <img 
                                src="/images/@(restaurant.Image ?? Url.Content("Default.jpg"))" 
                                alt="@restaurant.Name Logo"
                                onerror="this.src='@Url.Content("~/images/Default.jpg")'"
                                loading="lazy"
                            />                           
                        </div>

                        <div class="restaurant-content">
                            <h3 class="restaurant-name" title="@restaurant.Name">
                                @restaurant.Name
                            </h3>

                            <div class="restaurant-info-section">                                
                                <div class="info-row">
                                    <span class="info-label">
                                        <i class="fas fa-info-circle"></i> Status
                                    </span>
                                    <span class="info-badge active-badge active-@restaurant.AcctiveStatus.ToString().ToLower()">
                                        @restaurant.AcctiveStatus
                                    </span>
                                </div>
                            </div>

                            <div class="restaurant-actions">
                                <a 
                                    href="@Url.Action("ResturantDetails", "Restaurants", new { id = restaurant.Key })" 
                                    class="btn-details"
                                    aria-label="View details for @restaurant.Name"
                                >
                                    <i class="fas fa-eye"></i> View Details
                                </a>
                            </div>
                        </div>
                    </div>
                }
            </div>

            <div class="no-results">
                <div class="no-results-icon">
                    <i class="fas fa-search"></i>
                </div>
                <h3>No restaurants found</h3>
                <p>Try adjusting your search terms</p>
            </div>
        }
        else
        {
            <div class="empty-state">
                <div class="empty-state-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h3>All Caught Up!</h3>
                <p>There are no pending restaurant approvals at the moment. All applications have been reviewed.</p>
            </div>
        }
    </div>
</div>

@section Scripts{
    <partial name="_NotificationPartial"></partial>
    <script src="~/js/unAcceptedRestaurants.js"></script>
}